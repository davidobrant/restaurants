<!doctype html>
<html lang="en" xmlns:sec="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Restaurants</title>
    <link rel="stylesheet" th:href="@{/styles.css}">
    <script th:src="@{js/restaurants.js}" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <nav th:replace="~{components/navbar :: navbar(activePage=${activePage})}"></nav>
    <main>

        <section class="filter-restaurants">
           <form method="get" th:action="@{/restaurants}" class="filter-restaurants-form">
               <div class="fields">
                   <div class="filter">
                       <input type="text" name="name" placeholder="Filter by name" th:value="${param.name}">
                        <select name="city" id="city">
                           <option value="" selected>Filter by city</option>
                           <option th:each="city : ${cities}" th:value="${city}" th:text="${city}"
                                   th:selected="${city == param.city}"></option>
                        </select>
                       <select name="isOpen" id="isOpen">
                           <option value="" selected disabled>Filter by status</option>
                           <option value="true" th:selected="${param.isOpen == true}">Open</option>
                           <option value="false" th:selected="${param.isOpen == false}">Closed</option>
                        </select>
                   </div>
                   <div class="sort">
                        <select name="sortBy">
                            <option value="" disabled selected>-- Sort by --</option>
                            <option value="name" th:selected="${param.sortBy == 'name'}">Name</option>
                            <option value="city" th:selected="${param.sortBy == 'city'}">City</option>
                            <option value="rating" th:selected="${param.sortBy == 'rating'}">Rating</option>
                        </select>
                        <select name="sortDir">
                            <option value="asc" th:selected="${param.sortDir == 'asc'}">Ascending</option>
                            <option value="desc" th:selected="${param.sortDir == 'desc'}">Descending</option>
                        </select>
                   </div>
               </div>
               <div class="actions">
                   <button type="submit">Filter & Sort</button>
               </div>
           </form>
        </section>

        <section class="restaurants-container">
            <div th:unless="${restaurants.empty}" th:each="restaurant : ${restaurants}">
                <div th:insert="~{components/restaurants :: restaurant-card(restaurant=${restaurant})}"></div>
            </div>

            <div th:if="${restaurants.empty}" class="no-restaurants-container">
                <p>No restaurants to display...</p>
            </div>
        </section>
    </main>
    <footer th:replace="~{components/footer :: footer}"></footer>
</body>
</html>